//Simple Had application
method conditionaltest3(n:nat, q : Q[n], p : Q[1])
  requires { q[0,n), p [0] : en ↦ ∑ k ∈ [0, 2^n) . 1/sqrt(2^n) | k ⟩ | k % 2 ⟩ }
  ensures  { q[0,n), p [0] : en(2) ↦ ∑ k ∈ [0, 2^n) . ∑ j ∈ [0, 2) . 1/sqrt(2^n) *  ω (j * (k % 2), 2)| k ⟩ | j ⟩ }
{
  // induce superposition on the first qubit
  if (q[0] { p[0] *= H; }
  //(en)q[0,n); //it is best if we do not need this
}


//sp(if C then S1 else S2, P) = sp(S1, C /\ P) \/ sp(S2, !C /\ P)

/\ loc(u0) = q[0, n), p[0]
/\ value(u0) = ∑ k ∈ [0, 2^n) . 1/sqrt(2^n) | k ⟩ | k % 2 ⟩
/\ value(u0.q[0]) == 1
/\ loc(u) =  q[0, n), p[0] : en(2)
/\ value(u) =  ∑ k ∈ [0, 2^n) . 1/sqrt(2^n) * (1 - k % 2)| k ⟩ | 0 ⟩

\/
/\ loc(u0) = q[0, 1)
/\ value(u0) = |+⟩ = ∑ k ∈ [0, 2) . 1/sqrt(2) | k ⟩ 
/\ value(u0.q[0]) == 0
/\ loc(u) = q[0, 1), p[0, n) : en(2)
/\ value(u) =  ∑ k ∈ [0, 2^n) . ∑ j ∈ [0, 2) . 1/sqrt(2^(n+1)) * (k%2) * ω (j * (k % 2), 2)| k ⟩ | j ⟩


